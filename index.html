<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elite eSports - Tournament Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #e74c3c;
            --secondary: #3498db;
            --accent: #2ecc71;
            --dark: #1a1a1a;
            --darker: #0d0d0d;
            --card-bg: #2d2d2d;
            --text: #ffffff;
            --text-secondary: #b3b3b3;
            --border: #404040;
            --warning: #f39c12;
            --premium: #9b59b6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: var(--darker);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Auth Pages */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .auth-box {
            background: var(--card-bg);
            padding: 40px;
            border-radius: 12px;
            border: 1px solid var(--border);
            width: 100%;
            max-width: 400px;
            text-align: center;
        }
        
        .auth-logo {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 20px;
        }
        
        .auth-title {
            font-size: 1.8rem;
            margin-bottom: 10px;
            color: var(--text);
        }
        
        .auth-subtitle {
            color: var(--text-secondary);
            margin-bottom: 30px;
            font-size: 1rem;
        }
        
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-weight: 500;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: var(--dark);
            color: var(--text);
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus, .form-group select:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        .auth-btn {
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin: 10px 0;
        }
        
        .auth-btn:hover {
            background: #c0392b;
        }
        
        .google-btn {
            background: #4285f4;
        }
        
        .google-btn:hover {
            background: #3367d6;
        }
        
        .admin-btn {
            background: var(--warning);
        }
        
        .admin-btn:hover {
            background: #e67e22;
        }
        
        .switch-auth {
            margin-top: 20px;
            color: var(--text-secondary);
        }
        
        .switch-auth a {
            color: var(--accent);
            text-decoration: none;
            font-weight: 500;
        }
        
        .switch-auth a:hover {
            text-decoration: underline;
        }

        /* Header */
        .header {
            background: var(--dark);
            padding: 15px 0;
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }
        
        .nav-links {
            display: flex;
            gap: 25px;
            align-items: center;
        }
        
        .nav-link {
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 6px;
            transition: background-color 0.3s ease;
        }
        
        .nav-link:hover, .nav-link.active {
            background: var(--card-bg);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--card-bg);
            padding: 8px 16px;
            border-radius: 6px;
            border: 1px solid var(--border);
        }
        
        .user-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: white;
        }
        
        .logout-btn {
            background: transparent;
            color: var(--text-secondary);
            border: 1px solid var(--border);
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .logout-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        /* Hero Section */
        .hero {
            text-align: center;
            padding: 80px 0;
            background: linear-gradient(135deg, var(--dark) 0%, var(--darker) 100%);
        }
        
        .hero h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--text);
        }
        
        .hero p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: var(--text-secondary);
        }
        
        .motivation-text {
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto 40px;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 8px;
            border: 1px solid var(--border);
            color: var(--text-secondary);
        }
        
        .cta-button {
            display: inline-block;
            padding: 12px 32px;
            background: var(--primary);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1.1rem;
            transition: background-color 0.3s ease;
        }
        
        .cta-button:hover {
            background: #c0392b;
        }
        
        /* Game Selection */
        .game-selection {
            padding: 60px 0;
            text-align: center;
        }
        
        .section-title {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--text);
        }
        
        .section-subtitle {
            color: var(--text-secondary);
            margin-bottom: 40px;
        }
        
        .game-cards {
            display: flex;
            justify-content: center;
            gap: 25px;
            flex-wrap: wrap;
            margin-top: 40px;
        }
        
        .game-card {
            width: 280px;
            background: var(--card-bg);
            padding: 25px;
            border-radius: 8px;
            border: 1px solid var(--border);
            transition: transform 0.3s ease;
            text-align: center;
        }
        
        .game-card:hover {
            transform: translateY(-5px);
        }
        
        .game-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .game-card h3 {
            font-size: 1.5rem;
            margin-bottom: 12px;
            color: var(--text);
        }
        
        .game-card p {
            margin-bottom: 20px;
            color: var(--text-secondary);
        }
        
        /* Tournament Tiers */
        .tournament-tiers {
            padding: 60px 0;
            background: var(--dark);
        }
        
        .tier-cards {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 40px;
        }
        
        .tier-card {
            width: 240px;
            background: var(--card-bg);
            padding: 25px;
            border-radius: 8px;
            border: 1px solid var(--border);
            text-align: center;
            position: relative;
        }
        
        .tier-card.premium {
            border-color: var(--premium);
        }
        
        .tier-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--premium);
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .tier-price {
            font-size: 2rem;
            font-weight: 700;
            margin: 15px 0;
            color: var(--primary);
        }
        
        .tier-features {
            list-style: none;
            margin: 20px 0;
            text-align: left;
        }
        
        .tier-features li {
            margin: 10px 0;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
        }
        
        .tier-features i {
            color: var(--accent);
            margin-right: 8px;
        }
        
        .tier-button {
            display: inline-block;
            padding: 10px 20px;
            background: var(--primary);
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            transition: background-color 0.3s ease;
        }
        
        .tier-button:hover {
            background: #c0392b;
        }
        
        /* Tournament Grid */
        .tournament-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }
        
        .tournament-card {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 20px;
            border: 1px solid var(--border);
            transition: transform 0.3s ease;
        }
        
        .tournament-card:hover {
            transform: translateY(-3px);
        }
        
        .tournament-card.premium {
            border-color: var(--premium);
        }
        
        .tournament-time {
            background: var(--dark);
            padding: 4px 12px;
            border-radius: 12px;
            display: inline-block;
            margin-bottom: 12px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }
        
        .tournament-price {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 12px 0;
            color: var(--primary);
        }
        
        .prize-pool {
            font-size: 1.1rem;
            color: var(--accent);
            margin-bottom: 12px;
        }
        
        .kill-reward {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 10px;
            background: var(--dark);
            border-radius: 6px;
            color: var(--text-secondary);
        }
        
        .join-button {
            display: block;
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 15px;
        }
        
        .join-button:hover {
            background: #c0392b;
        }
        
        /* Admin Panel */
        .admin-panel {
            display: none;
        }
        
        .admin-header {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border: 1px solid var(--border);
        }
        
        .admin-nav {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .nav-btn {
            padding: 10px 20px;
            background: var(--card-bg);
            border: 1px solid var(--border);
            color: var(--text);
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .nav-btn.active {
            background: var(--primary);
            border-color: var(--primary);
        }
        
        .admin-section {
            display: none;
            background: var(--card-bg);
            padding: 25px;
            border-radius: 8px;
            border: 1px solid var(--border);
            margin-bottom: 20px;
        }
        
        .admin-section.active {
            display: block;
        }
        
        .room-list, .employee-list {
            margin-top: 20px;
        }
        
        .room-card, .employee-card {
            background: var(--dark);
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 10px;
            border-left: 4px solid var(--accent);
        }
        
        /* Footer */
        .footer {
            background: var(--dark);
            padding: 40px 0 20px;
            border-top: 1px solid var(--border);
            text-align: center;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .footer-link {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.3s ease;
        }
        
        .footer-link:hover {
            color: var(--text);
        }
        
        .copyright {
            color: var(--text-secondary);
            margin-top: 20px;
            font-size: 0.9rem;
        }
        
        /* Page Sections */
        .page {
            display: none;
            min-height: 100vh;
        }
        
        .page.active {
            display: block;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                flex-direction: column;
                gap: 10px;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .game-cards, .tier-cards {
                flex-direction: column;
                align-items: center;
            }
        }

        /* Loading Spinner */
        .spinner {
            border: 3px solid var(--border);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Room Details */
        .room-details {
            background: var(--dark);
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .room-id, .room-password {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div class="auth-container" id="login-page">
        <div class="auth-box">
            <div class="auth-logo">ELITE ESPORTS</div>
            <h2 class="auth-title">Player Login</h2>
            <p class="auth-subtitle">Enter the battleground</p>
            
            <div class="form-group">
                <label for="login-email">Email</label>
                <input type="email" id="login-email" placeholder="Enter your email">
            </div>
            
            <div class="form-group">
                <label for="login-password">Password</label>
                <input type="password" id="login-password" placeholder="Enter your password">
            </div>
            
            <button class="auth-btn" onclick="loginUser()">
                <i class="fas fa-sign-in-alt"></i> Login
            </button>
            
            <button class="auth-btn google-btn" onclick="googleLogin()">
                <i class="fab fa-google"></i> Continue with Google
            </button>

            <button class="auth-btn admin-btn" onclick="showAdminLogin()">
                <i class="fas fa-users-cog"></i> Admin Login
            </button>
            
            <div class="switch-auth">
                Don't have an account? <a href="#" onclick="showSignup()">Sign up</a>
            </div>
        </div>
    </div>
<!-- Signup Page -->
<div class="auth-container" id="signup-page" style="display: none;">
    <div class="auth-box">
        <div class="auth-logo">ELITE ESPORTS</div>
        <h2 class="auth-title">Create Account</h2>
        <p class="auth-subtitle">Start your journey</p>
        
        <div class="form-group">
            <label for="signup-name">Full Name</label>
            <input type="text" id="signup-name" placeholder="Enter your full name">
        </div>
        
        <div class="form-group">
            <label for="signup-email">Email</label>
            <input type="email" id="signup-email" placeholder="Enter your email">
        </div>
        
        <div class="form-group">
            <label for="signup-password">Password</label>
            <input type="password" id="signup-password" placeholder="Create a password">
        </div>
        
        <div class="form-group">
            <label for="signup-gameid">Game ID</label>
            <input type="text" id="signup-gameid" placeholder="Your in-game ID">
        </div>
        
        <button class="auth-btn" onclick="signupUser()">
            <i class="fas fa-user-plus"></i> Create Account
        </button>
        
        <button class="auth-btn google-btn" onclick="googleLogin()">
            <i class="fab fa-google"></i> Sign up with Google
        </button>
        
        <div class="switch-auth">
            Already have an account? <a href="#" onclick="showLogin()">Login</a>
        </div>
    </div>
</div>

<!-- Admin Login Page -->
<div class="auth-container" id="admin-login-page" style="display: none;">
    <div class="auth-box">
        <div class="auth-logo">ELITE ESPORTS</div>
        <h2 class="auth-title">Admin Login</h2>
        <p class="auth-subtitle">Management Panel</p>
        
        <div class="form-group">
            <label for="admin-email">Admin Email</label>
            <input type="email" id="admin-email" placeholder="Admin email">
        </div>
        
        <div class="form-group">
            <label for="admin-password">Admin Password</label>
            <input type="password" id="admin-password" placeholder="Admin password">
        </div>
        
        <button class="auth-btn admin-btn" onclick="adminLogin()">
            <i class="fas fa-unlock"></i> Admin Login
        </button>
        
        <button class="auth-btn" onclick="showLogin()">
            <i class="fas fa-arrow-left"></i> Back to Player Login
        </button>
    </div>
</div>

<!-- Main App -->
<div id="main-app" style="display: none;">
    <header class="header">
        <div class="container">
            <nav class="nav">
                <div class="logo">ELITE ESPORTS</div>
                <div class="nav-links">
                    <a href="#" class="nav-link active" onclick="showPage('home')">Home</a>
                    <a href="#" class="nav-link" onclick="showPage('freefire')">Free Fire</a>
                    <a href="#" class="nav-link" onclick="showPage('bgmi')">BGMI</a>
                    <div class="user-info">
                        <div class="user-avatar" id="user-avatar">P</div>
                        <span id="user-greeting">Welcome</span>
                        <button class="logout-btn" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <section id="home" class="page active">
        <div class="container">
            <div class="hero">
                <h1>ELITE ESPORTS</h1>
                <p>Competitive Gaming Platform</p>
                <div class="motivation-text">
                    Join daily tournaments, compete with the best, and win amazing prizes. Your journey to becoming a champion starts here.
                </div>
                <a href="#" class="cta-button" onclick="showPage('freefire')">View Tournaments</a>
            </div>

            <div class="game-selection">
                <h2 class="section-title">Choose Your Game</h2>
                <p class="section-subtitle">Select your battlefield and start competing</p>
                
                <div class="game-cards">
                    <div class="game-card">
                        <div class="game-icon">
                            <i class="fas fa-fire"></i>
                        </div>
                        <h3>FREE FIRE</h3>
                        <p>Daily tournaments â€¢ 7-9 PM</p>
                        <a href="#" class="cta-button" onclick="showPage('freefire')">Play Now</a>
                    </div>
                    
                    <div class="game-card">
                        <div class="game-icon">
                            <i class="fas fa-mobile-alt"></i>
                        </div>
                        <h3>BGMI</h3>
                        <p>Premium tournaments â€¢ Coming Soon</p>
                        <a href="#" class="cta-button" onclick="showPage('bgmi')">Coming Soon</a>
                    </div>
                </div>
            </div>

            <div class="tournament-tiers">
                <h2 class="section-title">Tournament Tiers</h2>
                <p class="section-subtitle">Choose your challenge level</p>
                
                <div class="tier-cards">
                    <div class="tier-card">
                        <h3>ENTRY</h3>
                        <div class="tier-price">â‚¹50</div>
                        <ul class="tier-features">
                            <li><i class="fas fa-check"></i> â‚¹10 Per Kill</li>
                            <li><i class="fas fa-check"></i> Custom Rooms</li>
                            <li><i class="fas fa-check"></i> Basic Rewards</li>
                        </ul>
                        <a href="#" class="tier-button" onclick="showPage('freefire')">Join Now</a>
                    </div>
                    
                    <div class="tier-card">
                        <h3>PRO</h3>
                        <div class="tier-price">â‚¹100</div>
                        <ul class="tier-features">
                            <li><i class="fas fa-check"></i> â‚¹25 Per Kill</li>
                            <li><i class="fas fa-check"></i> Custom Rooms</li>
                            <li><i class="fas fa-check"></i> Better Rewards</li>
                        </ul>
                        <a href="#" class="tier-button" onclick="showPage('freefire')">Join Now</a>
                    </div>
                    
                    <div class="tier-card premium">
                        <div class="tier-badge">POPULAR</div>
                        <h3>PREMIUM</h3>
                        <div class="tier-price">â‚¹200</div>
                        <ul class="tier-features">
                            <li><i class="fas fa-check"></i> â‚¹50 Per Kill</li>
                            <li><i class="fas fa-check"></i> Custom Rooms</li>
                            <li><i class="fas fa-check"></i> Premium Rewards</li>
                        </ul>
                        <a href="#" class="tier-button" onclick="showPage('freefire')">Go Premium</a>
                    </div>
                    
                    <div class="tier-card premium">
                        <div class="tier-badge">ELITE</div>
                        <h3>ELITE</h3>
                        <div class="tier-price">â‚¹500</div>
                        <ul class="tier-features">
                            <li><i class="fas fa-check"></i> â‚¹100 Per Kill</li>
                            <li><i class="fas fa-check"></i> Custom Rooms</li>
                            <li><i class="fas fa-check"></i> Elite Rewards</li>
                        </ul>
                        <a href="#" class="tier-button" onclick="showPage('freefire')">Become Elite</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="freefire" class="page">
        <div class="container">
            <h2 class="section-title">Free Fire Tournaments</h2>
            <p class="section-subtitle">Daily 7-9 PM â€¢ Custom Rooms Added by Admins</p>
            
            <div class="tournament-grid" id="freefire-rooms">
                <!-- Rooms will be dynamically loaded here -->
            </div>
        </div>
    </section>

    <section id="bgmi" class="page">
        <div class="container">
            <h2 class="section-title">BGMI Tournaments</h2>
            <p class="section-subtitle">Coming Soon â€¢ Premium Experience</p>
            
            <div class="tournament-grid">
                <div class="tournament-card">
                    <div class="tournament-time">Coming Soon</div>
                    <h3>BGMI Starter</h3>
                    <div class="tournament-price">â‚¹100</div>
                    <div class="prize-pool">Total Prize: â‚¹1200</div>
                    <div class="kill-reward">
                        <span>Per Kill:</span>
                        <span>â‚¹25</span>
                    </div>
                    <p>Start your BGMI journey</p>
                    <button class="join-button">Notify Me</button>
                </div>
                
                <div class="tournament-card premium">
                    <div class="tournament-time">Coming Soon</div>
                    <h3>BGMI Elite</h3>
                    <div class="tournament-price">â‚¹1000</div>
                    <div class="prize-pool">Total Prize: â‚¹12000</div>
                    <div class="kill-reward">
                        <span>Per Kill:</span>
                        <span>â‚¹300</span>
                    </div>
                    <p>The ultimate challenge</p>
                    <button class="join-button">Get Notified</button>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="logo" style="font-size: 1.8rem; margin-bottom: 20px; color: var(--primary);">ELITE ESPORTS</div>
            
            <div class="footer-links">
                <a href="#" class="footer-link">About</a>
                <a href="#" class="footer-link">Terms</a>
                <a href="#" class="footer-link">Privacy</a>
                <a href="#" class="footer-link">Contact</a>
                <a href="#" class="footer-link">Support</a>
            </div>
            
            <div class="copyright">
                &copy; 2024 Elite eSports. All rights reserved.
            </div>
        </div>
    </footer>
</div>
<!-- Admin Panel -->
<div id="admin-panel" class="admin-panel">
    <header class="header">
        <div class="container">
            <nav class="nav">
                <div class="logo">ELITE ESPORTS - ADMIN</div>
                <div class="nav-links">
                    <div class="user-info">
                        <div class="user-avatar" id="admin-avatar">A</div>
                        <span>Admin Panel</span>
                        <button class="logout-btn" onclick="logout()">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </div>
            </nav>
        </div>
    </header>

    <div class="container">
        <div class="admin-header">
            <h1>Admin Management Panel</h1>
            <p>Manage rooms, employees, and tournaments</p>
        </div>
        
        <div class="admin-nav">
            <button class="nav-btn active" onclick="showAdminSection('rooms')">
                <i class="fas fa-door-open"></i> Room Management
            </button>
            <button class="nav-btn" onclick="showAdminSection('employees')">
                <i class="fas fa-users"></i> Employees
            </button>
            <button class="nav-btn" onclick="showAdminSection('tournaments')">
                <i class="fas fa-trophy"></i> Tournaments
            </button>
        </div>
        
        <!-- Room Management Section -->
        <div class="admin-section active" id="rooms-section">
            <h2>Room Management</h2>
            <p>Add custom rooms for different tournament tiers</p>
            
            <div class="form-group">
                <label>Add New Room</label>
                <input type="text" id="room-id" placeholder="Room ID">
                <input type="text" id="room-password" placeholder="Room Password" style="margin-top: 10px;">
                <select id="room-tier" style="margin-top: 10px;">
                    <option value="50">â‚¹50 - Entry Level</option>
                    <option value="100">â‚¹100 - Pro Level</option>
                    <option value="200">â‚¹200 - Premium</option>
                    <option value="500">â‚¹500 - Elite</option>
                </select>
                <select id="room-game" style="margin-top: 10px;">
                    <option value="freefire">Free Fire</option>
                    <option value="bgmi">BGMI</option>
                </select>
                <button class="auth-btn" onclick="addRoom()" style="margin-top: 10px;">
                    <i class="fas fa-plus"></i> Add Room
                </button>
            </div>
            
            <div class="room-list" id="admin-room-list">
                <!-- Rooms will be listed here -->
            </div>
        </div>
        
        <!-- Employee Management Section -->
        <div class="admin-section" id="employees-section">
            <h2>Employee Management</h2>
            <p>Add and manage staff members</p>
            
            <div class="form-group">
                <label>Add New Employee</label>
                <input type="email" id="employee-email" placeholder="Employee email">
                <input type="password" id="employee-password" placeholder="Set password" style="margin-top: 10px;">
                <button class="auth-btn" onclick="addEmployee()" style="margin-top: 10px;">
                    <i class="fas fa-plus"></i> Add Employee
                </button>
            </div>
            
            <div class="employee-list" id="employee-list">
                <!-- Employees will be listed here -->
            </div>
        </div>

        <button class="logout-btn" onclick="logout()" style="margin-top: 30px;">
            <i class="fas fa-sign-out-alt"></i> Logout
        </button>
    </div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

<script>
    // Firebase Configuration
    const firebaseConfig = {
        apiKey: "AIzaSyCyQhuhHfY_eDTxaRslWmB-1nkATvf7qfg",
        authDomain: "elite-esports-846904616419.firebaseapp.com",
        projectId: "elite-esports-846904616419",
        storageBucket: "elite-esports-846904616419.appspot.com",
        messagingSenderId: "846904616419",
        appId: "1:846904616419:web:71f29ce3191d18914cacd6"
    };

    // Initialize Firebase
    let auth, db;
    try {
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        auth = firebase.auth();
        db = firebase.firestore();
        console.log("Firebase initialized successfully");
    } catch (error) {
        console.error("Firebase initialization error:", error);
    }

    // Current User Data
    let currentUser = null;
    let userRole = 'player';

    // Authentication Functions
    function showLogin() {
        document.getElementById('login-page').style.display = 'flex';
        document.getElementById('signup-page').style.display = 'none';
        document.getElementById('admin-login-page').style.display = 'none';
    }

    function showSignup() {
        document.getElementById('login-page').style.display = 'none';
        document.getElementById('signup-page').style.display = 'flex';
        document.getElementById('admin-login-page').style.display = 'none';
    }

    function showAdminLogin() {
        document.getElementById('login-page').style.display = 'none';
        document.getElementById('signup-page').style.display = 'none';
        document.getElementById('admin-login-page').style.display = 'flex';
    }

    async function signupUser() {
        const email = document.getElementById('signup-email').value;
        const password = document.getElementById('signup-password').value;
        const name = document.getElementById('signup-name').value;
        const gameId = document.getElementById('signup-gameid').value;

        if (!email || !password || !name) {
            alert('Please fill all required fields');
            return;
        }

        try {
            const userCredential = await auth.createUserWithEmailAndPassword(email, password);
            const user = userCredential.user;
            
            await db.collection('users').doc(user.uid).set({
                name: name,
                email: email,
                gameId: gameId || 'Not set',
                role: 'player',
                createdAt: firebase.firestore.FieldValue.serverTimestamp()
            });
            
            alert('Account created successfully!');
            showMainApp();
        } catch (error) {
            console.error('Signup error:', error);
            alert('Error: ' + error.message);
        }
    }

    async function loginUser() {
        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;

        if (!email || !password) {
            alert('Please enter email and password');
            return;
        }

        try {
            const userCredential = await auth.signInWithEmailAndPassword(email, password);
            const user = userCredential.user;
            
            // Get user role from Firestore
            const userDoc = await db.collection('users').doc(user.uid).get();
            if (userDoc.exists) {
                const userData = userDoc.data();
                userRole = userData.role;
                
                if (userRole === 'admin' || userRole === 'employee') {
                    showAdminPanel();
                } else {
                    showMainApp();
                }
            } else {
                // Default to player if no document found
                userRole = 'player';
                showMainApp();
            }
        } catch (error) {
            console.error('Login error:', error);
            
            if (error.code === 'auth/user-not-found') {
                if (confirm('Account not found. Create new account?')) {
                    showSignup();
                    document.getElementById('signup-email').value = email;
                    document.getElementById('signup-password').value = password;
                }
            } else {
                alert('Login failed: ' + error.message);
            }
        }
    }

   async function adminLogin() {
    const email = document.getElementById('admin-email').value;
    const password = document.getElementById('admin-password').value;

    // Simple admin authentication
    if (email === 'admin@eliteesports.com' && password === 'jatin1909_2010_1808') {
        userRole = 'admin';
        showAdminPanel();
    } else {
        alert('Invalid admin credentials');
    }
}
    async function googleLogin() {
        try {
            const provider = new firebase.auth.GoogleAuthProvider();
            provider.addScope('profile');
            provider.addScope('email');
            
            const result = await auth.signInWithPopup(provider);
            const user = result.user;
            
            // Check if user document exists
            const userDoc = await db.collection('users').doc(user.uid).get();
            
            if (!userDoc.exists) {
                // Create new user document
                await db.collection('users').doc(user.uid).set({
                    name: user.displayName,
                    email: user.email,
                    gameId: 'Not set',
                    role: 'player',
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                userRole = 'player';
            } else {
                const userData = userDoc.data();
                userRole = userData.role;
            }
            
            if (userRole === 'admin' || userRole === 'employee') {
                showAdminPanel();
            } else {
                showMainApp();
            }
        } catch (error) {
            console.error('Google login error:', error);
            
            if (error.code === 'auth/popup-blocked') {
                alert('Popup was blocked. Please allow popups for this site.');
            } else if (error.code === 'auth/popup-closed-by-user') {
                alert('Login cancelled.');
            } else {
                alert('Google login failed: ' + error.message);
            }
        }
    }

    function logout() {
        auth.signOut();
    }

    function showMainApp() {
        document.getElementById('login-page').style.display = 'none';
        document.getElementById('signup-page').style.display = 'none';
        document.getElementById('admin-login-page').style.display = 'none';
        document.getElementById('main-app').style.display = 'block';
        document.getElementById('admin-panel').style.display = 'none';
        
        const user = auth.currentUser;
        if (user) {
            const displayName = user.displayName || user.email.split('@')[0];
            document.getElementById('user-greeting').textContent = `Welcome, ${displayName}`;
            document.getElementById('user-avatar').textContent = displayName.charAt(0).toUpperCase();
            
            // Load rooms for players
            loadRoomsForPlayers();
        }
    }

    function showAdminPanel() {
        document.getElementById('login-page').style.display = 'none';
        document.getElementById('signup-page').style.display = 'none';
        document.getElementById('admin-login-page').style.display = 'none';
        document.getElementById('main-app').style.display = 'none';
        document.getElementById('admin-panel').style.display = 'block';
        
        const user = auth.currentUser;
        if (user) {
            const displayName = user.displayName || user.email.split('@')[0] || 'Admin';
            document.getElementById('admin-avatar').textContent = displayName.charAt(0).toUpperCase();
            
            // Load admin data
            loadAdminRooms();
            loadEmployees();
        }
    }

    // Page Navigation
    function showPage(pageId) {
        document.querySelectorAll('.page').forEach(page => {
            page.classList.remove('active');
        });
        document.getElementById(pageId).classList.add('active');
        
        document.querySelectorAll('.nav-link').forEach(link => {
            link.classList.remove('active');
        });
        
        event.target.classList.add('active');
        
        // If showing freefire page, reload rooms
        if (pageId === 'freefire') {
            loadRoomsForPlayers();
        }
    }

    function showAdminSection(section) {
        document.querySelectorAll('.admin-section').forEach(sec => {
            sec.classList.remove('active');
        });
        document.getElementById(section + '-section').classList.add('active');
        
        document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.classList.remove('active');
        });
        
        event.target.classList.add('active');
    }
        // Room Management Functions
        async function addRoom() {
            const roomId = document.getElementById('room-id').value;
            const roomPassword = document.getElementById('room-password').value;
            const roomTier = document.getElementById('room-tier').value;
            const roomGame = document.getElementById('room-game').value;

            if (!roomId || !roomPassword) {
                alert('Please enter room ID and password');
                return;
            }

            try {
                await db.collection('rooms').add({
                    roomId: roomId,
                    password: roomPassword,
                    tier: roomTier,
                    game: roomGame,
                    status: 'active',
                    createdBy: currentUser?.email || 'admin',
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                alert('Room added successfully!');
                document.getElementById('room-id').value = '';
                document.getElementById('room-password').value = '';
                
                loadAdminRooms();
            } catch (error) {
                alert('Error adding room: ' + error.message);
            }
        }

        async function loadAdminRooms() {
            try {
                const querySnapshot = await db.collection('rooms')
                    .orderBy('createdAt', 'desc')
                    .get();
                
                const roomList = document.getElementById('admin-room-list');
                roomList.innerHTML = '';
                
                if (querySnapshot.empty) {
                    roomList.innerHTML = `
                        <div class="no-rooms" style="text-align: center; padding: 40px; background: var(--dark); border-radius: 8px;">
                            <i class="fas fa-door-closed" style="font-size: 3rem; color: var(--text-secondary); margin-bottom: 20px;"></i>
                            <h3>No Rooms Created Yet</h3>
                            <p>Add your first room using the form above</p>
                        </div>
                    `;
                    return;
                }

                querySnapshot.forEach((doc) => {
                    const room = doc.data();
                    const roomCard = document.createElement('div');
                    roomCard.className = 'room-card';
                    roomCard.innerHTML = `
                        <div style="display: flex; justify-content: between; align-items: start; margin-bottom: 10px;">
                            <h4 style="margin: 0; flex: 1;">
                                ${room.game.toUpperCase()} - â‚¹${room.tier} ${getTierName(room.tier)}
                            </h4>
                            <span class="room-status ${room.status === 'active' ? 'active' : 'inactive'}">
                                ${room.status === 'active' ? 'ðŸŸ¢ Active' : 'ðŸ”´ Inactive'}
                            </span>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 15px;">
                            <div>
                                <strong>Room ID:</strong>
                                <div style="font-family: monospace; background: var(--darker); padding: 5px; border-radius: 4px; margin-top: 5px;">
                                    ${room.roomId}
                                </div>
                            </div>
                            <div>
                                <strong>Password:</strong>
                                <div style="font-family: monospace; background: var(--darker); padding: 5px; border-radius: 4px; margin-top: 5px;">
                                    ${room.password}
                                </div>
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9em; color: var(--text-secondary);">
                            <div>
                                <i class="fas fa-user-shield"></i>
                                ${room.createdBy || 'Admin'}
                            </div>
                            <div>
                                <i class="fas fa-clock"></i>
                                ${room.createdAt ? timeAgo(room.createdAt.toDate()) : 'Recently'}
                            </div>
                        </div>
                        
                        <div style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                            <button class="logout-btn" onclick="deleteRoom('${doc.id}')">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                            <button class="auth-btn" style="padding: 6px 12px; font-size: 0.9rem;" 
                                    onclick="toggleRoomStatus('${doc.id}', '${room.status}')">
                                <i class="fas fa-power-off"></i>
                                ${room.status === 'active' ? 'Deactivate' : 'Activate'}
                            </button>
                            <button class="auth-btn" style="padding: 6px 12px; font-size: 0.9rem; background: var(--secondary);" 
                                    onclick="editRoom('${doc.id}', '${room.roomId}', '${room.password}', '${room.tier}', '${room.game}')">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                        </div>
                    `;
                    roomList.appendChild(roomCard);
                });

            } catch (error) {
                console.error('Error loading admin rooms:', error);
                alert('Error loading rooms: ' + error.message);
            }
        }

        async function loadRoomsForPlayers() {
            try {
                const querySnapshot = await db.collection('rooms')
                    .where('status', '==', 'active')
                    .where('game', '==', 'freefire')
                    .orderBy('tier', 'asc')
                    .orderBy('createdAt', 'desc')
                    .get();
                
                const roomGrid = document.getElementById('freefire-rooms');
                roomGrid.innerHTML = '';
                
                if (querySnapshot.empty) {
                    roomGrid.innerHTML = `
                        <div class="no-rooms" style="grid-column: 1 / -1; text-align: center; padding: 40px; background: var(--card-bg); border-radius: 8px;">
                            <i class="fas fa-door-open" style="font-size: 3rem; color: var(--text-secondary); margin-bottom: 20px;"></i>
                            <h3>No Rooms Available</h3>
                            <p>Check back later for new tournament rooms</p>
                            <button class="auth-btn" onclick="showPage('home')" style="margin-top: 20px;">
                                <i class="fas fa-home"></i> Back to Home
                            </button>
                        </div>
                    `;
                    return;
                }

                // Group rooms by tier
                const roomsByTier = {
                    '50': { rooms: [], name: 'Entry', killReward: '10' },
                    '100': { rooms: [], name: 'Pro', killReward: '25' },
                    '200': { rooms: [], name: 'Premium', killReward: '50' },
                    '500': { rooms: [], name: 'Elite', killReward: '100' }
                };

                querySnapshot.forEach((doc) => {
                    const room = doc.data();
                    if (roomsByTier[room.tier]) {
                        roomsByTier[room.tier].rooms.push({
                            id: doc.id,
                            ...room
                        });
                    }
                });

                // Create tournament cards for each tier
                for (const [tier, tierData] of Object.entries(roomsByTier)) {
                    if (tierData.rooms.length > 0) {
                        const isPremium = tier === '200' || tier === '500';
                        
                        // Add tier section header
                        const tierHeader = document.createElement('div');
                        tierHeader.className = 'tier-header';
                        tierHeader.style.gridColumn = '1 / -1';
                        tierHeader.style.textAlign = 'center';
                        tierHeader.style.margin = '30px 0 20px 0';
                        tierHeader.style.padding = '15px';
                        tierHeader.style.background = isPremium ? 'var(--premium)' : 'var(--primary)';
                        tierHeader.style.borderRadius = '8px';
                        tierHeader.innerHTML = `
                            <h3 style="color: white; margin: 0;">
                                ${tierData.name} Tier - â‚¹${tier} Rooms
                                <span style="font-size: 0.9em; opacity: 0.9;">(â‚¹${tierData.killReward} per kill)</span>
                            </h3>
                            <p style="color: white; margin: 5px 0 0 0; opacity: 0.9;">
                                ${tierData.rooms.length} room${tierData.rooms.length > 1 ? 's' : ''} available
                            </p>
                        `;
                        roomGrid.appendChild(tierHeader);

                        // Add rooms for this tier
                        tierData.rooms.forEach((room, index) => {
                            const roomCard = document.createElement('div');
                            roomCard.className = `tournament-card ${isPremium ? 'premium' : ''}`;
                            roomCard.innerHTML = `
                                <div class="tournament-time">
                                    <i class="fas ${room.game === 'freefire' ? 'fa-fire' : 'fa-mobile-alt'}"></i>
                                    Room ${index + 1}
                                    ${room.createdAt ? 
                                        `<span style="margin-left: 10px; font-size: 0.8em; opacity: 0.7;">
                                            Added ${timeAgo(room.createdAt.toDate())}
                                        </span>` : 
                                        ''
                                    }
                                </div>
                                <h3>${tierData.name} Battle</h3>
                                <div class="tournament-price">â‚¹${tier}</div>
                                <div class="prize-pool">
                                    <i class="fas fa-trophy"></i>
                                    Custom Tournament Room
                                </div>
                                <div class="kill-reward">
                                    <span>Per Kill Reward:</span>
                                    <span>â‚¹${tierData.killReward}</span>
                                </div>
                                <div class="room-details">
                                    <div class="room-id">
                                        <span><i class="fas fa-door-open"></i> Room ID:</span>
                                        <span style="font-family: monospace; font-weight: bold;">${room.roomId}</span>
                                    </div>
                                    <div class="room-password">
                                        <span><i class="fas fa-key"></i> Password:</span>
                                        <span style="font-family: monospace; font-weight: bold;">${room.password}</span>
                                    </div>
                                    ${room.createdBy ? 
                                        `<div style="margin-top: 8px; padding-top: 8px; border-top: 1px solid var(--border); font-size: 0.8em; color: var(--text-secondary);">
                                            <i class="fas fa-user-shield"></i> Added by: ${room.createdBy}
                                        </div>` : 
                                        ''
                                    }
                                </div>
                                <button class="join-button" onclick="joinRoom('${room.roomId}', '${room.password}', ${tier})">
                                    <i class="fas fa-gamepad"></i> Join Room
                                </button>
                                <div style="margin-top: 10px; display: flex; gap: 10px;">
                                    <button class="logout-btn" style="flex: 1; padding: 8px;" onclick="copyToClipboard('${room.roomId}')">
                                        <i class="fas fa-copy"></i> Copy ID
                                    </button>
                                    <button class="auth-btn" style="flex: 1; padding: 8px; font-size: 0.9rem;" onclick="copyToClipboard('${room.password}')">
                                        <i class="fas fa-copy"></i> Copy PW
                                    </button>
                                </div>
                            `;
                            roomGrid.appendChild(roomCard);
                        });
                    }
                }

            } catch (error) {
                console.error('Error loading rooms for players:', error);
                const roomGrid = document.getElementById('freefire-rooms');
                roomGrid.innerHTML = `
                    <div class="error-message" style="grid-column: 1 / -1; text-align: center; padding: 40px; background: var(--card-bg); border-radius: 8px;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 3rem; color: var(--warning); margin-bottom: 20px;"></i>
                        <h3>Error Loading Rooms</h3>
                        <p>Please check your connection and try again</p>
                        <button class="auth-btn" onclick="loadRoomsForPlayers()" style="margin-top: 20px;">
                            <i class="fas fa-redo"></i> Retry
                        </button>
                    </div>
                `;
            }
        }

        // Utility Functions
        function getTierName(tier) {
            const tiers = {
                '50': 'Entry',
                '100': 'Pro',
                '200': 'Premium',
                '500': 'Elite'
            };
            return tiers[tier] || 'Unknown';
        }

        function getKillReward(tier) {
            const rewards = {
                '50': '10',
                '100': '25',
                '200': '50',
                '500': '100'
            };
            return rewards[tier] || '0';
        }

        function timeAgo(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            let interval = seconds / 31536000;
            
            if (interval > 1) return Math.floor(interval) + " years ago";
            interval = seconds / 2592000;
            if (interval > 1) return Math.floor(interval) + " months ago";
            interval = seconds / 86400;
            if (interval > 1) return Math.floor(interval) + " days ago";
            interval = seconds / 3600;
            if (interval > 1) return Math.floor(interval) + " hours ago";
            interval = seconds / 60;
            if (interval > 1) return Math.floor(interval) + " minutes ago";
            return "just now";
        }

        function joinRoom(roomId, password, tier) {
            const tierName = getTierName(tier.toString());
            const killReward = getKillReward(tier.toString());
            
            const joinMessage = `
ðŸ† JOINING TOURNAMENT ROOM ðŸ†

ðŸŽ® Room Details:
â€¢ Tier: ${tierName} (â‚¹${tier})
â€¢ Room ID: ${roomId}
â€¢ Password: ${password}
â€¢ Per Kill: â‚¹${killReward}

ðŸ“‹ Instructions:
1. Open Free Fire/BGMI
2. Go to Custom Room
3. Enter Room ID: ${roomId}
4. Enter Password: ${password}
5. Join and dominate!

Good luck, champion! ðŸŽ¯
            `;
            
            if (confirm(joinMessage)) {
                alert(`âœ… Successfully joined ${tierName} room!\n\nRoom ID: ${roomId}\nPassword: ${password}\n\nGood luck! ðŸŽ®`);
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                // Show temporary success indicator
                const originalText = event.target.innerHTML;
                event.target.innerHTML = '<i class="fas fa-check"></i> Copied!';
                event.target.style.background = 'var(--accent)';
                
                setTimeout(() => {
                    event.target.innerHTML = originalText;
                    event.target.style.background = '';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy: ', err);
                alert('Failed to copy to clipboard. Please copy manually.');
            });
        }
        // Employee Management Functions
        async function addEmployee() {
            const email = document.getElementById('employee-email').value;
            const password = document.getElementById('employee-password').value;

            if (!email || !password) {
                alert('Please enter email and password');
                return;
            }

            try {
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                await db.collection('users').doc(user.uid).set({
                    name: 'Employee',
                    email: email,
                    role: 'employee',
                    createdAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                alert('Employee added successfully!');
                document.getElementById('employee-email').value = '';
                document.getElementById('employee-password').value = '';
                
                loadEmployees();
            } catch (error) {
                alert('Error adding employee: ' + error.message);
            }
        }

        async function loadEmployees() {
            try {
                const querySnapshot = await db.collection('users')
                    .where('role', '==', 'employee')
                    .get();
                
                const employeeList = document.getElementById('employee-list');
                employeeList.innerHTML = '';
                
                querySnapshot.forEach((doc) => {
                    const employee = doc.data();
                    const employeeCard = document.createElement('div');
                    employeeCard.className = 'employee-card';
                    employeeCard.innerHTML = `
                        <h4>${employee.name}</h4>
                        <p>Email: ${employee.email}</p>
                        <p>Role: ${employee.role}</p>
                        <p>Joined: ${employee.createdAt ? new Date(employee.createdAt.toDate()).toLocaleDateString() : 'Recently'}</p>
                        <div style="margin-top: 10px; display: flex; gap: 10px;">
                            <button class="logout-btn" onclick="deleteEmployee('${doc.id}')">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                            <button class="auth-btn" style="padding: 5px 10px; font-size: 0.9rem;" onclick="editEmployee('${doc.id}', '${employee.name}', '${employee.email}')">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                        </div>
                    `;
                    employeeList.appendChild(employeeCard);
                });
            } catch (error) {
                console.error('Error loading employees:', error);
                alert('Error loading employees: ' + error.message);
            }
        }

        // Edit Employee Function
        function editEmployee(employeeId, currentName, currentEmail) {
            const newName = prompt('Enter new name for employee:', currentName);
            const newEmail = prompt('Enter new email for employee:', currentEmail);
            
            if (newName && newEmail) {
                db.collection('users').doc(employeeId).update({
                    name: newName,
                    email: newEmail,
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                })
                .then(() => {
                    alert('Employee updated successfully!');
                    loadEmployees();
                })
                .catch((error) => {
                    alert('Error updating employee: ' + error.message);
                });
            }
        }

        async function deleteEmployee(employeeId) {
            if (confirm('Are you sure you want to delete this employee? This action cannot be undone.')) {
                try {
                    await db.collection('users').doc(employeeId).delete();
                    alert('Employee deleted successfully!');
                    loadEmployees();
                } catch (error) {
                    console.error('Error deleting employee:', error);
                    alert('Error deleting employee: ' + error.message);
                }
            }
        }

        // Room Operations
        async function deleteRoom(roomId) {
            if (confirm('Are you sure you want to delete this room?')) {
                try {
                    await db.collection('rooms').doc(roomId).delete();
                    alert('Room deleted successfully!');
                    loadAdminRooms();
                } catch (error) {
                    alert('Error deleting room: ' + error.message);
                }
            }
        }

        async function toggleRoomStatus(roomId, currentStatus) {
            const newStatus = currentStatus === 'active' ? 'inactive' : 'active';
            
            try {
                await db.collection('rooms').doc(roomId).update({
                    status: newStatus,
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                alert(`Room ${newStatus === 'active' ? 'activated' : 'deactivated'} successfully!`);
                loadAdminRooms();
            } catch (error) {
                alert('Error updating room status: ' + error.message);
            }
        }

        function editRoom(roomId, currentRoomId, currentPassword, currentTier, currentGame) {
            const newRoomId = prompt('Enter new Room ID:', currentRoomId);
            const newPassword = prompt('Enter new Password:', currentPassword);
            const newTier = prompt('Enter new Tier (50, 100, 200, 500):', currentTier);
            const newGame = prompt('Enter new Game (freefire/bgmi):', currentGame);
            
            if (newRoomId && newPassword && newTier && newGame) {
                db.collection('rooms').doc(roomId).update({
                    roomId: newRoomId,
                    password: newPassword,
                    tier: newTier,
                    game: newGame,
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                })
                .then(() => {
                    alert('Room updated successfully!');
                    loadAdminRooms();
                })
                .catch((error) => {
                    alert('Error updating room: ' + error.message);
                });
            }
        }

        // Real-time Room Updates
        function setupRoomListeners() {
            // Real-time listener for rooms
            db.collection('rooms')
                .where('status', '==', 'active')
                .where('game', '==', 'freefire')
                .orderBy('createdAt', 'desc')
                .onSnapshot((snapshot) => {
                    loadRoomsForPlayers();
                    if (userRole === 'admin' || userRole === 'employee') {
                        loadAdminRooms();
                    }
                }, (error) => {
                    console.error('Room listener error:', error);
                });
        }

        // Auth State Observer
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                currentUser = user;
                
                try {
                    const userDoc = await db.collection('users').doc(user.uid).get();
                    if (userDoc.exists) {
                        const userData = userDoc.data();
                        userRole = userData.role;
                        
                        // Setup real-time listeners
                        setupRoomListeners();
                        
                        if (userRole === 'admin' || userRole === 'employee') {
                            showAdminPanel();
                        } else {
                            showMainApp();
                        }
                    } else {
                        userRole = 'player';
                        setupRoomListeners();
                        showMainApp();
                    }
                } catch (error) {
                    console.error('Error getting user role:', error);
                    userRole = 'player';
                    setupRoomListeners();
                    showMainApp();
                }
            } else {
                currentUser = null;
                userRole = 'player';
                showLogin();
                document.getElementById('main-app').style.display = 'none';
                document.getElementById('admin-panel').style.display = 'none';
            }
        });

        // Additional Styles for Status Indicators
        const additionalStyles = `
            <style>
                .room-status.active {
                    color: var(--accent);
                    font-weight: bold;
                }
                .room-status.inactive {
                    color: var(--text-secondary);
                    font-weight: bold;
                }
                .tier-header {
                    background: linear-gradient(135deg, var(--primary), var(--secondary));
                }
                .no-rooms, .error-message {
                    background: var(--card-bg) !important;
                    border: 1px solid var(--border);
                }
            </style>
        `;
        document.head.insertAdjacentHTML('beforeend', additionalStyles);

        // Initialize the system
        showLogin();

        // Tournament Join Handlers
        document.addEventListener('DOMContentLoaded', function() {
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('join-button') && !e.target.onclick) {
                    const card = e.target.closest('.tournament-card');
                    const name = card.querySelector('h3').textContent;
                    const price = card.querySelector('.tournament-price').textContent;
                    
                    if (card.classList.contains('premium')) {
                        alert(`Joining ${name} for ${price}\n\nPremium tournament - higher rewards!`);
                    } else {
                        alert(`Joining ${name} for ${price}`);
                    }
                }
                
                if (e.target.classList.contains('tier-button') || e.target.classList.contains('cta-button')) {
                    e.preventDefault();
                    showPage('freefire');
                }
            });
        });

        console.log('Elite eSports System Initialized Successfully! ðŸŽ®');
    </script>
</body>
</html>